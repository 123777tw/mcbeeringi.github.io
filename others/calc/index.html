<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="og:http://ogp.me/ns#">
<head>
	<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-145066191-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-145066191-2');</script>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>McbeEringi calc</title>
	<meta name="description" content="PWA calculator">
	<link rel="shortcut icon" type="image/png" href="icon.png">
	<meta property="og:type" content="website">
	<meta property="og:title" content="McbeEringi calc">
	<meta property="og:description" content="PWA calculator">
	<meta property="og:url" content="https://mcbeeringi.github.io/others/calc/">
	<meta property="og:image" content="https://mcbeeringi.github.io/others/calc/icon.png">
	<!--iOS-->
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="default">
	<meta name="apple-mobile-web-app-title" content="calc">
	<link rel="apple-touch-icon" href="icon.png">
	<!--sw-->
	<link rel="manifest" href="mf.json">
	<meta name="theme-color" content="#214"/>
	<script>
		if('serviceWorker'in navigator&&location.protocol.includes('https'))window.addEventListener('load',()=>{navigator.serviceWorker.register('sw.js').then((reg)=>{console.log('skysw Registered',reg);});},{once:true});
		//navigator.serviceWorker.getRegistrations().then(r=>r.forEach(x=>x.unregister()));
	</script>

	<link rel="stylesheet" href="../../src/style.css">
</head>
<body>
	<style>
		html,body{height:100%;margin:0;overflow:hidden;}
		#ctn{
			--dx:72px;--dy:64px;--disp:1.5;--font:.4;--bgc:#444;
			position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);line-height:var(--dy);font-size:calc(var(--dy)*var(--font));
			overflow:hidden;text-align:center;
			display:grid;grid-template-columns:repeat(5,var(--dx));grid-template-rows:calc(var(--dy)*var(--disp)) repeat(6,var(--dy));
		}
		#ctn,#ctn>*{border:1px solid #888;box-sizing:border-box;user-select:none;}
		#ctn>*{margin:0;background-color:var(--bgc);touch-action:none;user-select:none;-webkit-user-select:none;}
		#ctn>:hover{filter:brightness(1.5);}
		#disp{grid-column:1/-1;padding:0 16px;--bgc:#111;text-align:right;touch-action:initial;user-select:all;-webkit-user-select:all;line-height:calc(var(--dy)*var(--disp));font-size:calc(calc(var(--dy)*var(--disp))*var(--font));}
		#pl{grid-column:-2/-1;grid-row:-3/-1;line-height:calc(var(--dy)*2);}
	</style>
	<div id="ctn">
		<div id="disp">loading...</div>
		<p>cfg</p><p id="pc">%</p><p id="sr">√</p><p id="bs">→</p><p id="gt">GT</p>
		<p id="mc">MC</p><p id="mr">MR</p><p id="mm">M-</p><p id="mp">M+</p><p>÷</p>
		<p id="pm">+/-</p><p class="num">7</p><p class="num">8</p><p class="num">9</p><p>×</p>
		<p id="cl">C</p><p class="num">4</p><p class="num">5</p><p class="num">6</p><p>-</p>
		<p id="ac">AC</p><p class="num">1</p><p class="num">2</p><p class="num">3</p><p id="pl">+</p>
		<p class="num">0</p><p class="num">00</p><p class="num">.</p><p id="eq">=</p>
	</div>
	<script>
		class Calc{
			constructor(){
				this.round=0;// [F,CUT,5/4]
				this.fract=2;// 0>n : add2
			}
			digit(){//string

			}
			op_add(){}
			op_sub(){}
			op_mul(){}
			op_div(){}
			op_pow(){}
			op_eq (){}
			//kmode(){}

			gt(){}
			mc(){}
			mr(){}
			msub(){}
			madd(){}

			ac(){}
			c(){}
			back(){}
			
			disp(){}
		}
		const num=[...document.body.querySelectorAll('.num')].sort((a,b)=>Math.sign(a.textContent-b.textContent)),
			draw=()=>{
				console.log(dat);
				if(dat==0)dat='';
				dat=dat.slice(0,16);
				disp.textContent=dat||0;
			};
		let dat='',m=0,gtm=0;

		num.forEach(x=>{
			x.onpointerdown=e=>{
				dat+=x.textContent;
			};
		});
		eq.onpointerdown=()=>gtm+=+dat;

		pc.onpointerdown=()=>dat=String(dat/100);
		sr.onpointerdown=()=>dat=String(Math.sqrt(dat));
		bs.onpointerdown=()=>dat=dat.slice(0,-1);
		gt.onpointerdown=()=>dat=String(gtm);

		mc.onpointerdown=()=>m=0;
		mr.onpointerdown=()=>dat=String(m);
		mm.onpointerdown=()=>m-=+dat;
		mp.onpointerdown=()=>m+=+dat;
		pm.onpointerdown=()=>dat=String(-dat);

		ac.onpointerdown=()=>{
			dat='';
			gtm=0;
		};
		cl.onpointerdown=()=>{
			dat='';
		};

		ctn.onpointerdown=draw;
		draw();
		[...ctn.children].forEach(x=>x.addEventListener('touchstart',()=>{},{passive:true}));
	</script>
</body>
</html>
