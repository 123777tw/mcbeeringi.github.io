<html>
	<head>
		<meta charset="utf-8">
		<script src="https://unpkg.com/tesseract.js@v2.0.2/dist/tesseract.min.js"></script>
		<style>
			*{
				font-family: sans-serif;
			}
			label.file{
				display: block;
				width: 60%;
				background-color: #eee;
				text-align: center;
				padding: 20%;
				border: solid 2px #888;
				border-radius: 7px;
			}
			input[type=file]{
				display: none;
			}
		</style>
	</head>
	<body>
		<h1>OCR!</h1>
		<div id="ready"></div>
		<label class="file">
			D&amp;D又はクリックして選択<br>
			<input type="file" name="img" accept="image/png, image/jpeg" onchange="fname.textContent=this.value.split('\\').pop();fname.textContent=fname.textContent?fname.textContent:'　'">
			<div id="fname">　</div>
		</label>
		<img id="img" src="img/test.png" width=50%>
		<div id="msg"></div>
		<div id="s"></div>

		<script>
			Tesseract.recognize('img/ready.jpg','jpn',{
				logger:m => document.getElementById("ready").textContent="準備中… "+m.progress*100+"%"
				}).then(({data:{text}})=>document.getElementById("ready").textContent=text);
			Tesseract.recognize(document.getElementById("img"),'jpn',{
				logger:(m) => {document.getElementById("msg").innerText=m.status+"…\n"+m.progress*100+"%";}
				}).then(
					({data:{text}}) => {
						document.getElementById("msg").textContent="done!";
						document.getElementById("s").textContent=text;
					}
				);
		</script>
		</body>
</html>
