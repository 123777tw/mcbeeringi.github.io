<!DOCTYPE html>
<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<title>bmp</title>
		<meta name="viewport" content="width=device-width,initial-scale=1.0">
	</head>
	<body>
		<style>
			:root{color:#fff;font-family:sans-serif;image-rendering:pixelated;}
			#disp{width:512px;height:512px;box-shadow:0 0 0 1px #888;overflow:hidden;}
			#disp>p{display:inline-block;width:6.25%;height:6.25%;margin:0;vertical-align:top;overflow:hidden;position:relative;}
			p span{position:absolute;bottom:0;}label span{display:inline-block;width:6ex;text-align:right;margin-right:1ex;}a{background:#888;}
			@font-face {font-family:"custom";src:url(custom.ttf)format("truetype");}
			input{background-color:#0000;color:#fff;border:none;border-radius:0;border-bottom:2px solid #888;font-size:14px;}
			input:focus{outline:none;border-bottom:2px solid #48f;transition:.5s;}
		</style>
		<script src="../../src/html2canvas.min.js"></script>


		<label><span>img:</span><input type="number" value="512" onchange="i_s(this.value);render();">px²</label><br>
		<label><span>size:</span><input type="number" value="24" oninput="f_s(this.value);render();">px</label><br>
		<label><span>grid:</span><input type="checkbox" onchange="grid(this.checked)"></label><br>
		<label><span>font:</span><input value="sans-serif" onchange="document.body.style.fontFamily=this.value;render();"></label><span style="float:right;">"custom" = custom.ttf</span><br>
		<label><span>block:</span><input id="men" value="00" onchange="set();render();"></label><br>
		<br>
		<a id="dl" download href="">……</a><br>
		<div id="disp"></div>
		<img id="img" style="width:50vw;">

		<script>
			var p256='';for(var i=0;i<256;i++)p256+='<p><span></span></p>';disp.insertAdjacentHTML('beforeend',p256);
			const	i_s=x=>{disp.style.width=x+'px';disp.style.height=x+'px';}
			const	f_s=x=>disp.querySelectorAll('p span').forEach(e=>e.style.fontSize=`${x}px`);
			f_s(24)
			const grid=(x)=>disp.querySelectorAll('#disp>p').forEach(e=>e.style.boxShadow=x?'0 0 0 1px #fff8':'');
			const set=()=>disp.querySelectorAll('p span').forEach((e,i)=>e.textContent=String.fromCodePoint(parseInt(men.value,16)*0x100+Number(i)));
			set();
			function render(){
				document.body.style.background='#0000';
				html2canvas(document.getElementById("disp"),{"backgroundColor":null}).then(c=>{
					dl.href=c.toDataURL();
					dl.download=`glyph_${men.value}.png`;
					dl.innerText=`download as ${dl.download}`;
					img.src=dl.href;
				});
				document.body.style.background='#222';
			}
			render();
		</script>
	</body>
</html>
