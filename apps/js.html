<!DOCTYPE html>
<html lang='en' dir='ltr'>
<head>
	<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-145066191-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-145066191-2');</script>

	<meta charset='utf-8'>
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>McbeEringi JavaScript</title>
	<meta name="description" content="js sandbox">
	<link rel="shortcut icon" type="image/svg+xml" href="../img/icon.svg">
	<link rel="apple-touch-icon" href="../img/icon.png">
	<meta name="theme-color" content="#214"/>

	<link rel="stylesheet" href="../src/style.css">

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror/lib/codemirror.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror/theme/monokai.min.css">
	<script src="https://cdn.jsdelivr.net/npm/codemirror/lib/codemirror.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/codemirror/mode/javascript/javascript.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/codemirror/addon/edit/matchbrackets.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/codemirror/addon/edit/closebrackets.min.js"></script>
</head>
<body>
	<h1>JavaScript</h1>
	<style>.CodeMirror{height:auto;}</style>
	<hr>
	<div></div>
	<hr>
	<button class="button">run</button>
	<button class="button">save</button>
	<button class="button">copy url</button>
	<pre style="white-space:pre-wrap;word-break:break-all;tab-size:2;"></pre>
	<hr>
	<script>
	{
		const log=document.querySelector('pre'),
			btn=document.querySelectorAll('button'),
			cm=CodeMirror(document.querySelector('div'),{
				value:'console.clear();\nconsole.log("Hello World.");\n',mode:'javascript',theme:'monokai',
				lineNumbers:true,tabSize:2,indentWithTabs:true,matchBrackets:true,autoCloseBrackets: true,
			}),
			type=x=>Object.prototype.toString.call(x).slice(8,-1),
			time=()=>{const d=new Date();return `[${d.toLocaleTimeString()}.${String(d.getMilliseconds()).padStart(3,0)}]`;};
		console.clear=()=>log.textContent='';
		console.warn=console.info=console.error=console.log=(...x)=>{
			const fx=x=>`\n<span style="opacity:0.5;">\t${type(x)}\t</span>${x.toString()}`;
			log.insertAdjacentHTML('beforeend',`<span style="opacity:0.5;">${time()}</span>${x.map(fx).join('')}\n`);
		};
		btn[0].onclick=()=>{try{Function(cm.getValue())();}catch(e){console.error(e);}};
		btn[1].onclick=()=>{location.hash=encodeURIComponent(cm.getValue()).replace(/\(/g,'%28').replace(/\)/g,'%29');console.log('saved!');};
		btn[2].onclick=(x=location.href)=>navigator.clipboard.writeText(x).then(()=>console.log('copied!'));
		if(location.hash)cm.setValue(decodeURIComponent(location.hash.slice(1)));
	}
	</script>
</body>
</html>
