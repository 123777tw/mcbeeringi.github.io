<!DOCTYPE html>
<html lang='en' dir='ltr'>
<head>
	<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-145066191-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-145066191-2');</script>

	<meta charset='utf-8'>
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>McbeEringi JavaScript</title>
	<meta name="description" content="js sandbox">
	<link rel="shortcut icon" type="image/svg+xml" href="../img/icon.svg">
	<link rel="apple-touch-icon" href="../img/icon.png">
	<meta name="theme-color" content="#214"/>

	<link rel="stylesheet" href="../src/style.css">

	<style>
		#log{background:#333;padding:4px;white-space:pre-wrap;overflow-x:scroll;}
		#log>span{opacity:.5;}
	</style>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror/lib/codemirror.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror/theme/monokai.min.css">
	<script src="https://cdn.jsdelivr.net/npm/codemirror/lib/codemirror.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/codemirror/mode/javascript/javascript.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/codemirror/addon/edit/matchbrackets.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/codemirror/addon/edit/closebrackets.min.js"></script>
</head>
<body>
	<h1>JavaScript</h1>
	<hr>
	<div id='_cme_'></div>
	<button onclick="_run_();" class="button">run</button>
	<button onclick="_save_();" class="button">save</button>
	<button onclick="_copy_();" class="button">copy url</button>
	<pre id="log"></pre>
	<script>
	console.clear=()=>log.textContent='';
	console.warn=console.info=console.error=console.log=(...x)=>{
		log.insertAdjacentHTML('beforeend',`<span>${_time_()}</span>`);
		log.insertAdjacentText('beforeend',x.map(x=>`\t${_type_(x)} ${JSON.stringify(x)||x.toString()}`).join(',\n')+'\n');
	};
	const _cm_=CodeMirror(_cme_,{
		value:'console.clear();\nconsole.log("Hello World.");',mode:'javascript',theme:'monokai',
		lineNumbers:true,tabSize:2,indentWithTabs:true,matchBrackets:true,autoCloseBrackets: true,
	}),
	_type_=x=>Object.prototype.toString.call(x).slice(8,-1),
	_time_=()=>{const d=new Date();return `[${d.toLocaleTimeString()}.${('00'+d.getMilliseconds()).slice(-3)}]`;},
	_run_=()=>{try{Function(_cm_.getValue())();}catch(e){console.error(e);}},
	_save_=()=>{location.hash=encodeURIComponent(_cm_.getValue()).replace(/\(/g,'%28').replace(/\)/g,'%29');console.log('saved!');},
	_copy_=(x=location.href)=>navigator.clipboard.writeText(x).then(()=>console.log('copied!'));
	if(location.hash)_cm_.setValue(decodeURIComponent(location.hash.slice(1)));
	</script>
</body>
</html>
