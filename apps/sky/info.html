<!DOCTYPE html>
<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1.0">
		<title>McbeEringi sky_info</title>
		<link href="https://fonts.googleapis.com/css2?family=Lato:wght@300&family=M+PLUS+Rounded+1c&display=swap" rel="stylesheet">
		<style>:root{font-family:'M PLUS Rounded 1c',sans-serif;}</style>
	</head>
	<body>
		<style>
			:root{background:#222;color:#fff;text-shadow:0 0 4px #222;tab-size:4em;font-size:16px;}
			html,body,#bg{margin:0;height:100%;width:100%;}
			#bg{position:fixed;bottom:0;right:0;z-index:-16;}
			pre{white-space:pre-wrap;}
		</style>


		<pre id="time">時刻計算中…</pre>
		<hr>
		<h2>本日分</h2>
		<pre id="today">loading…</pre>
		<hr>
		<h2>次回更新分</h2>
		<pre id="next">loading…</pre>
		<hr>
		<pre>大キャンドル参考元: <a href="https://twitter.com/sky_tea11/status/1234038235149426689/photo/1">ティー様</a></pre>
		<div id="bg"></div>
		<script>
			const bgcol = [
				[4,1,2,2,3,4][Math.floor(Math.max(new Date().getHours()-1,0)*.25)],
				"#fff1cf,#ced980",//morn
				"#cce5f0,#ced980",//day
				"#f08300,#f8b862",//dusk
				"#192f60,#274a78"//night
			];
			bg.style.background = "linear-gradient("+bgcol[bgcol[0]]+")";
			function main(date) {
				const dt = date.getDate(),dy=date.getDay(),h=date.getHours();
				const c_pat = (x)=>[(x-1)%5,Math.floor(x/5)%[2,3,3,2,3][x%5]];
				const c_dic =[
					//https://twitter.com/sky_tea11/status/1234038235149426689/photo/1
					//https://twitter.com/i/events/1176090791342567424
					["~草原~",
						["入口左手前","丸石奥","鳥の塔右奥","洞窟入口"],
						["入口右奥","丸石右","4島中央","神殿内"],
						["入口左奥","鳥の塔中央","洞窟内","神殿前"]
					],
					["~雨林~",
						["入口右手前","開拓地船","川&蟹木","晴れ間池"],
						["入口左奥","開拓地奥木","墓所中央","神殿後"],
						["入口右奥","川&蟹出口","墓所橋","晴れ間奥"]
					],
					["~峡谷~",
						["入口左","スケート橋","天球儀入口","ゴール左"],
						["入口右奥","スケート氷","天球儀出口","ゴール右"]
					],
					["~捨て地~",
						["入口後ろ","祠出口","投石台手前","戦場砦右奥"],
						["入口左奥","祠闇花","投石台中央","難破船後端"],
						["入口右奥","投石台出口","難破船先端","戦場砦上"]
					],
					["~書庫~",
						["1F手前","1F奥","2F奥","6F手前"],
						["1F右","2F扉左","4F祠","6F奥"]
					],
				];
				var c_pat_ = c_pat(dt);
				return "大キャンドル:	"+c_dic[c_pat_[0]][0]+"\n		"+c_dic[c_pat_[0]][c_pat_[1]+1].join(", ")+
					//"\nデイリー:	"+
					"\nオフィス:	"+(dt%7==5?"ねこ":(dt%7==6?"宇宙":"特になし"));
			}
			setTimeout(()=>setInterval(()=>{
				var date = new Date();
				time.textContent = "現在時刻: "+date.toLocaleString();
				date.setMinutes(date.getMinutes()-420+date.getTimezoneOffset());
				time.textContent += "\nサーバー時刻: "+date.toLocaleString();
				today.innerText = main(date);
				date.setDate(date.getDate()+1);
				next.innerText = main(date);
			},1000),1000-new Date().getMilliseconds());
		</script>
	</body>
</html>
