<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<title></title>
</head>
<body>
<style>
	body,pre{margin:0}
	.box{background:#ccc;height:100vh;position:relative;user-select:none;-webkit-user-select:none;touch-action:none;}
	#lc{position:absolute;border:2px solid #8888;border-radius:50%;bottom:16px;left:10px;pointer-events:none;transition:top .1s,left .1s}
	#lc:not(.press){width:32px;height:32px;}
	#lc.press{width:128px;height:128px;background:#8884;border:4px solid #0000;border-top:4px solid #888}
</style>

<div class="box">
	<div id="lc"></div>
	<pre id="log"></pre>
</div>

<script>
'use strict';
var lc_={style:getComputedStyle(lc)};lc_.l=lc_.style.left;lc_.r=lc_.style.right
const px2n=x=>Number(x.slice(0,-2));
console.log(lc_)
window.addEventListener('pointerdown',e=>{
	console.log(e);
	lc_.pdx=e.clientX;lc_.pdy=e.clientY;lc.classList.add('press');
	lc.style.left=`${lc_.pdx-px2n(lc_.style.width)*.5}px`;
	lc.style.top=`${lc_.pdy-px2n(lc_.style.height)*.5}px`
});
window.addEventListener('pointermove',e=>{
	var p={x:e.clientX-lc_.pdx,y:-e.clientY+lc_.pdy};
	p.l=Math.sqrt(p.x*p.x+p.y*p.y);
	lc_.a=Math.sqrt(e.movementX*e.movementX+e.movementY*e.movementY);
	if(lc.classList.contains('press')){
		log.textContent=JSON.stringify(p);
		lc.style.transform=`rotate(${Math.atan2(p.x,p.y)*180/Math.PI}deg) scale(${Math.max(80,128-p.l)/128})`;
	}
});
window.addEventListener('pointerup',e=>{
	lc.classList.remove('press');
	log.textContent+='\nflick: '+lc_.a;
	lc.style.left=lc_.l;lc.style.top=lc_.r;
	lc.style.transform='none';
});
</script>
</body>
</html>
