<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
</head>
<body>
<style>
	.rotw{perspective:1000px;width:512px;height:512px;border:1px solid #000;float:left;}
	#rot{transform-style:preserve-3d;width:100%;height:100%;position:relative;border:1px solid #0008;border-radius:50%;text-align:center;}
	#rot>div{width:256px;height:256px;position:absolute;top:128px;left:128px;border-radius:8px;}
</style>
<div class="rotw">
	<div id="rot">
		â†‘
		<div style="background:#f884;transform:rotateY(90deg);"></div>
		<div style="background:#8f84;"></div>
		<div style="background:#88f4;transform:rotateX(90deg);"></div>
	</div>
</div>
<button id="butt">run</button>
<pre id="log"></pre><pre id="log_"></pre>
<script>
const momain=()=>{
	window.addEventListener('devicemotion',e=>{
	 log.textContent=`motion : ${e.interval}
A\nx:${('_ '+e.acceleration.x.toFixed(2)).slice(-6)}\ny:${('_ '+e.acceleration.y.toFixed(2)).slice(-6)}\nz:${('_ '+e.acceleration.z.toFixed(2)).slice(-6)}
AG\nx:${('_ '+e.accelerationIncludingGravity.x.toFixed(2)).slice(-6)}\ny:${('_ '+e.accelerationIncludingGravity.y.toFixed(2)).slice(-6)}\nz:${('_ '+e.accelerationIncludingGravity.z.toFixed(2)).slice(-6)}
R\nalpha:${('_ '+e.rotationRate.alpha.toFixed(2)).slice(-6)}\n beta:${('_ '+e.rotationRate.beta.toFixed(2)).slice(-6)}\ngamma:${('_ '+e.rotationRate.gamma.toFixed(2)).slice(-6)}`;
	});
};
const ormain=()=>{
	window.addEventListener('deviceorientation',e=>{
	 log_.textContent=`orientation : ${e.absolute}\nalpha:${e.alpha.toFixed(2)}\n beta:${e.beta.toFixed(2)}\ngamma:${e.gamma.toFixed(2)}`;
	 rot.style.transform=`rotateX(${-e.gamma}deg)rotateY(${-e.beta}deg)rotateZ(${e.alpha}deg)`;
	});
};
const oramain=()=>{
	window.addEventListener('deviceorientationabsolute',e=>{
	 log_.textContent=`orientationabs\nalpha:${e.alpha.toFixed(2)}\n beta:${e.beta.toFixed(2)}\ngamma:${e.gamma.toFixed(2)}`;
	});
};
const reqp=()=>{
	if(DeviceMotionEvent && typeof DeviceMotionEvent.requestPermission=='function')
		DeviceMotionEvent.requestPermission()
			.then(p=>{if(p=='granted')momain();else alert('permisson denied');}).catch(e=>alert(e));
	else momain();
	if(DeviceOrientationEvent && typeof DeviceOrientationEvent.requestPermission=='function')
		DeviceOrientationEvent.requestPermission()
		.then(p=>{if(p=='granted')ormain();else alert('permisson denied');}).catch(e=>alert(e));
	else ormain();
	if(DeviceOrientationAbsoluteEvent && typeof DeviceOrientationAbsoluteEvent.requestPermission=='function')
		DeviceOrientationAbsoluteEvent.requestPermission()
		.then(p=>{if(p=='granted')oramain();else alert('permisson denied');}).catch(e=>alert(e));
	else oramain();
};

butt.onclick=reqp;
</script>
</body>
</html>
