<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
</head>
<body>
<button id="butt">run</button>
<pre id="log"></pre><pre id="log_"></pre>
<script>
const momain=()=>{
	window.addEventListener('devicemotion',e=>{
	 log.textContent=`motion\nx:${e.acceleration.x}\ny:${e.acceleration.y}\nz:${e.acceleration.z}\n_`;
	});
};
const ormain=()=>{
	window.addEventListener('deviceorientation',e=>{
	 log_.textContent=`orientation\n${e.absolute}\nalpha:${e.alpha}\nbeta:${e.beta}\ngamma:${e.gamma}`;
	});
};
const reqp=()=>{
	if(DeviceMotionEvent && typeof DeviceMotionEvent.requestPermission=='function')
		DeviceMotionEvent.requestPermission()
			.then(p=>{if(p=='granted')momain();else alert('permisson denied');}).catch(e=>alert(e));
	else momain();
	if(DeviceOrientationEvent && typeof DeviceOrientationEvent.requestPermission=='function')
		DeviceOrientationEvent.requestPermission()
		.then(p=>{if(p=='granted')ormain();else alert('permisson denied');}).catch(e=>alert(e));
	else ormain();
};

butt.onclick=reqp;
</script>
</body>
</html>
