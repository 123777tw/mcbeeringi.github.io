<!DOCTYPE html>
<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<title>yahoo ruby</title>
	</head>
	<body>
		<textarea id="inp">ﾔﾌｰ ルビ振りAPI
		東京特許許可局局長今日急遽休暇許可却下</textarea>
		<button onclick="main(inp.value).then(x=>log.textContent=x);">exe</button>
		<pre id="log"></pre>
		<a href="https://developer.yahoo.co.jp/webapi/jlp/furigana/v1/furigana.html">Yahoo ルビ振りAPI</a>
		<script>
			let dp=new DOMParser();
			const main=x=>fetch(`https://jlp.yahooapis.jp/FuriganaService/V1/furigana?appid=${atob('ZGowMGFpWnBQVnBQY0dGbVpFRTVkelJ0ZENaelBXTnZibk4xYldWeWMyVmpjbVYwSm5nOVptTS0=')}&sentence=${encodeURIComponent(x)}`,{mode:'cors'})
					.then(r=>r.text()).then(t=>dp.parseFromString(t,'text/xml'))
					.then(y=>{console.log(y);let s='';y.querySelectorAll('Word').forEach(e=>s+=(e.querySelector('Roman')||e.querySelector('Surface')).textContent);return s;});
		</script>
	</body>
</html>
